function create_VIM_EVENTLISTENER(n,e,c,t){function o(e){n(e)}function r(){e.executor.chars().on("click",function(){t()&&(e.executor.changeCursorTo($(this)),c.sendMessage("cursor_changed"))})}function i(n){return n.which||n.keyCode}function u(){$(document).keypress(function(n){if(s(n),t()){var e=d.intToChar(i(n)),c=n.ctrlKey?"ctrl-":"",r=c+e;o(r),f(n)}})}function s(n){c.sendMessage("pressed_key",i(n))}function a(){$(document).keydown(function(n){if(s(n),t())return 27===i(n)?(o("Esc"),!1):8==i(n)?(o("Backspace"),!1):32===i(n)?(o("Space"),!1):13===i(n)?(o("Enter"),!1):n.ctrlKey&&"V"===d.intToChar(i(n))?(o("ctrl-v"),!1):void 0})}function f(n){n.stopImmediatePropagation()}var d=VIM_GENERIC;$(function(){u(),a(),r()})}