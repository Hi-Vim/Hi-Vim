function create_VIM_TESTVIEW(t,e){function s(t,e){_=t,f=e}function i(t,e,s){s=void 0!==s?s:"",e?$("<div />",{text:t+e,class:s?s:""}).addClass("testinfo").insertBefore(u):$("<div />",{text:t,class:s}).addClass("testinfo").insertBefore(u)}function n(t,e,s,i){var n=$("<div />",{class:"testinfo"}),a=$("<div />",{text:t,class:e}),d=$("<div />",{text:s,class:i});n.append(a).append(d).append($("<div />",{style:"clear: both"})),n.insertBefore(u)}function a(){0===f?$(".tests_allpassed",e).show():$(".tests_problems",e).show(),$(".testunit").children(":not(.test_description)").hide(),$(".testunit .failed").each(function(){$(this).closest(".testunit").find(".test_description").addClass("failed_unit")}),$("#show_test_details").click(function(){$(".testunit").children(":not(.test_description)").toggle()}),$("#show_test_details").show(),o(document),create_VIM_CURSOR_BLINKING(document,500,t).blink()}function d(){}function o(t){$(".test_expected:not(.testunit_as_dom), .test_result:not(.testunit_as_dom), .test_initial:not(.testunit_as_dom)",t).each(function(){for(var t,e=$(this),s=$(this).text(),i=$("<div />",{class:"testunit_as_dom"}),n=0;n<s.length;++n)"|"===s.charAt(n)?t=$("<div />",{class:"linebreak",text:"|"}):"["===s.charAt(n)&&s.length>n+1?(t=$("<div />",{class:"cursor",text:s.substring(n+1,n+2)}),n+=2):t=$("<div />",{text:s.charAt(n)})," "===s.charAt(n)&&(t.addClass("empty"),t.text(" ")),i.append(t);e.html(i)})}function c(){$(".tests_failed",e).text("Failed tests: "+f),$(".tests_succeeded",e).text("Succeeded tests: "+_),$(".tests_run",e).text("Run tests total: "+(_+f))}function l(){var t=$("<div />",{class:"testunit"}).insertBefore(r),e=$("<div />",{style:"clear: both"});t.append(e),u=e}var r=$("#appendtarget",e),u=r,_=0,f=0;return $(".tests_problems",e).live("click",function(){$(".failed:last",e).closest(".testunit").detach().insertBefore($(".testinfo:first").closest(".testunit"))}),{log:i,log2:n,showEndResult:a,updateStatisticsView:c,updateValues:s,logStartUnit:l,logEndUnit:d}}